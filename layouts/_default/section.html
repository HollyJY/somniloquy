{{ define "main" }}

    <div class="post-list-container post-list-container-shadow">
        {{ $pages := where .RegularPages "Draft" "ne" true }}
        {{ $pages = $pages.ByDate.Reverse }}
        {{ $paginator := .Paginate $pages }}
        {{ range $paginator.Pages.GroupByDate "2006" }}
            <a class="a-block">
                <div class="post-item-wrapper post-item-wrapper-no-hover">
                    <div class="post-item post-item-no-gaps">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title post-item-title-small year">
                                {{ .Key }}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {{ range .Pages }}
            <a href="{{ .RelPermalink }}" class="a-block">
                <div class="post-item-wrapper">
                    <div class="post-item post-item-no-gaps">
                        <div class="post-item-info-wrapper">
                            <div class="post-item-title">
                                {{ .Title }}
                            </div>
                            <div class="post-item-summary">
                                {{ if .Description }}
                                    {{ .Description }}
                                {{ else if (findRE "<!--more-->" .RawContent) }}
                                    {{ .Summary }}
                                {{ else }}
                                    {{ .Plain | truncate 50 }}
                                {{ end }}
                            </div>
                            {{ partial "post-item-meta.html" . }}
                        </div>
                    </div>
                </div>
            </a>
            {{ end }}
        {{ end }}
    </div>

{{ end }}
